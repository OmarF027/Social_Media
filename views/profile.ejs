<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title><%= title %></title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; }
    .post { border: 1px solid #ddd; padding: 10px; margin: 10px 0; border-radius: 5px; }
    .post-author { font-weight: bold; }
    .post-time { font-size: 0.8em; color: #666; }
    .comment { margin-left: 20px; font-size: 0.9em; }
    .comment-author { font-weight: bold; }
    .like-button { margin-right: 10px; }
    img { max-width: 150px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1><%= user.username %></h1>

  <% if(user.profilePictureURL) { %>
    <img src="<%= user.profilePictureURL %>" alt="Foto profilo">
  <% } %>

  <h3>Aggiorna foto profilo</h3>
  <form action="/profile/photo" method="POST" enctype="multipart/form-data">
    <input type="file" name="profilePicture" accept="image/*" required>
    <button type="submit">Aggiorna foto</button>
  </form>

  <h2>Post dell'utente</h2>

  <% if(user.posts.length === 0) { %>
    <p>Nessun post ancora.</p>
  <% } %>

  <% user.posts.forEach(post => { %>
    <div class="post">
      <div class="post-content"><%= post.content %></div>
      <div class="post-time"><%= new Date(post.createdAt).toLocaleString() %></div>
      <div>Likes: <%= post.likes.length %></div>

      <% post.comments.forEach(comment => { %>
        <div class="comment">
          <span class="comment-author"><%= comment.author.username %></span>: <%= comment.content %>
        </div>
      <% }) %>
    </div>
  <% }) %>
</body>
</html>
